<!-- Inheritance from base template -->
{% extends "QTSurvey/base/base.html" %}
{% load static %}

{% load chartit %}
{{ poschart|load_charts:"poschart" }}

{% block researcher_survey_analytics %}
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="{% static 'QTSurvey/highcharts-theme.js' %}"></script>


<div class="survey-analysis">
  <center>
    <h2>Survey Analysis for: {{ survey.title }}</h2>
  </center>

	<br>
	<div class="row">
		<div class="col-md-6"><h3 align="left">Total Concensus</h3></div>
		<div id='container' style="min-width: 310px; height: 400px; margin: 0 auto"></div>
		<script type='text/javascript'>

				// Apply the theme
				Highcharts.setOptions(Highcharts.theme);

				Highcharts.chart('container', {
						chart: {
								type: 'column'
						},
						title: {
								text: 'Column chart with negative values'
						},
						xAxis: {
								categories: ['Response Option Consensus']
						},
						credits: {
								enabled: false
						},
						series: [ 
						{% for key, value in totalConsensus %}
							{
							name: '{{ key }}',
							data: [{{ value }}]
							},
						{% endfor %}]
				});
		</script>
	</div>

	<br>
	<br>

	<div class="row">
		<div class="col-md-12"><h3>Clusters</h3></div>
		{% for cluster in clusters %}
		<div class="row">
			<div class="col-md-6"><h4>{{cluster.name}}</h4></div>
			<div class="col-md-6"><h4 align="right">Number in cluster: {{ cluster.Nodes|length }}</h4></div>
		</div>
		{% endfor %}
	</div>


</div>

{% endblock %}

